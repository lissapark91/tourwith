<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="tk.tourwith.project.faq.mapper.FaqMapper">

	
	<!-- FAQ 게시판 리스트 매퍼 -->
	<select id="selectFaqList" resultType="Faq" parameterType="map">
		select
		FAQ_NO 
		,SJ
		,REG_DE
		,CON
		,HITCNT
		,UPD_DE
		,DEL_YN
		,REG_MB_NO
		from FAQ
		where DEL_YN = 'n'
		
  	</select>
  	
  	<!-- FAQ 게시판 뷰 -->
  	<select id="selectFaq" resultType="Faq" parameterType="string">
		select
			FAQ_NO 
			,SJ
			,REG_DE
			,CON
			,HITCNT
			,UPD_DE
			,DEL_YN
			,REG_MB_NO
		from FAQ
		where DEL_YN = 'n'
		and FAQ_NO = #{faq_no}
		
  	</select>
  	
  	
  	<insert id="insertFaq" parameterType="Faq">
  	
  	<selectKey keyProperty="faq_no" resultType="string" order="BEFORE">
  		SELECT NEXT_NO FROM NO_CREAT where TABLENM = 'FAQ'
  	</selectKey>
  	
  		INSERT INTO FAQ(
  		FAQ_NO
			,SJ
			,REG_DE
			,CON
			,HITCNT
			,UPD_DE
			,DEL_YN
			,REG_MB_NO)
		VALUES(
			CONCAT('FAQ_',#{faq_no})
			,#{faq_no}
			,#{sj}
			,#{reg_de}
			,#{con}
			,#{hitcnt}
			,#{upd_de}
			,#{del_yn}
			,#{reg_mb_no}
  	</insert>
  	
  		
  		
  	<update id="updateHitCnt" parameterType="string">
  		UPDATE FAQ
			SET
			 	hitcnt = hitcnt + 1
				WHERE faq_no = #{faq_no}
				
  	</update>
  
  	
  	
  	
  	
  	
  	
  	
  	
  	
  	
  	
  	
 </mapper>